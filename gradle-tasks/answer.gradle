defaultTasks 'add-message from me.'

def variable
task initIt(){
	doLast{
		variable = 'This is the'
	}
}

def pattern='add-'
tasks.addRule("Pattern: $pattern<message>") { String taskName ->
    if (taskName.startsWith(pattern)) {
        task(taskName) {
			dependsOn initIt
			finalizedBy printIt
			doLast{
				variable += " ${taskName-pattern}"
			}
        }
    }
}

task printIt(){	
	doLast{
		println variable
	}
}
